{"ast":null,"code":"/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// These are used to set the WebGl depth for a tile.\nvar MAX_LAYERS = 256; // Max number of layers per stage.\nvar MAX_LEVELS = 256; // Max number of levels per layer.\n\nvar clamp = require('../util/clamp');\nvar vec4 = require('gl-matrix').vec4;\nvar vec3 = require('gl-matrix').vec3;\nvar mat4 = require('gl-matrix').mat4;\nfunction createShader(gl, type, src) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw gl.getShaderInfoLog(shader);\n  }\n  return shader;\n}\nfunction createShaderProgram(gl, vertexSrc, fragmentSrc, attribList, uniformList) {\n  var vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexSrc);\n  var fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentSrc);\n  var shaderProgram = gl.createProgram();\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    throw gl.getProgramInfoLog(shaderProgram);\n  }\n  for (var i = 0; i < attribList.length; i++) {\n    var attrib = attribList[i];\n    shaderProgram[attrib] = gl.getAttribLocation(shaderProgram, attrib);\n    if (shaderProgram[attrib] === -1) {\n      throw new Error('Shader program has no ' + attrib + ' attribute');\n    }\n  }\n  for (var j = 0; j < uniformList.length; j++) {\n    var uniform = uniformList[j];\n    shaderProgram[uniform] = gl.getUniformLocation(shaderProgram, uniform);\n    if (shaderProgram[uniform] === -1) {\n      throw new Error('Shader program has no ' + uniform + ' uniform');\n    }\n  }\n  return shaderProgram;\n}\nfunction destroyShaderProgram(gl, shaderProgram) {\n  var shaderList = gl.getAttachedShaders(shaderProgram);\n  for (var i = 0; i < shaderList.length; i++) {\n    var shader = shaderList[i];\n    gl.detachShader(shaderProgram, shader);\n    gl.deleteShader(shader);\n  }\n  gl.deleteProgram(shaderProgram);\n}\nfunction createConstantBuffer(gl, target, usage, value) {\n  var buffer = gl.createBuffer();\n  gl.bindBuffer(target, buffer);\n  gl.bufferData(target, value, usage);\n  return buffer;\n}\nfunction createConstantBuffers(gl, vertexIndices, vertexPositions, textureCoords) {\n  return {\n    vertexIndices: createConstantBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, gl.STATIC_DRAW, new Uint16Array(vertexIndices)),\n    vertexPositions: createConstantBuffer(gl, gl.ARRAY_BUFFER, gl.STATIC_DRAW, new Float32Array(vertexPositions)),\n    textureCoords: createConstantBuffer(gl, gl.ARRAY_BUFFER, gl.STATIC_DRAW, new Float32Array(textureCoords))\n  };\n}\nfunction destroyConstantBuffers(gl, constantBuffers) {\n  gl.deleteBuffer(constantBuffers.vertexIndices);\n  gl.deleteBuffer(constantBuffers.vertexPositions);\n  gl.deleteBuffer(constantBuffers.textureCoords);\n}\nfunction enableAttributes(gl, shaderProgram) {\n  var numAttrs = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\n  for (var i = 0; i < numAttrs; i++) {\n    gl.enableVertexAttribArray(i);\n  }\n}\nfunction disableAttributes(gl, shaderProgram) {\n  var numAttrs = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\n  for (var i = 0; i < numAttrs; i++) {\n    gl.disableVertexAttribArray(i);\n  }\n}\nfunction setTexture(gl, shaderProgram, texture) {\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture._texture);\n  gl.uniform1i(shaderProgram.uSampler, 0);\n}\nfunction setDepth(gl, shaderProgram, layerZ, tileZ) {\n  var depth = ((layerZ + 1) * MAX_LEVELS - tileZ) / (MAX_LEVELS * MAX_LAYERS);\n  gl.uniform1f(shaderProgram.uDepth, depth);\n}\nvar defaultOpacity = 1.0;\nvar defaultColorOffset = vec4.create();\nvar defaultColorMatrix = mat4.create();\nmat4.identity(defaultColorMatrix);\nfunction setupPixelEffectUniforms(gl, effects, uniforms) {\n  var opacity = defaultOpacity;\n  if (effects && effects.opacity != null) {\n    opacity = effects.opacity;\n  }\n  gl.uniform1f(uniforms.opacity, opacity);\n  var colorOffset = defaultColorOffset;\n  if (effects && effects.colorOffset) {\n    colorOffset = effects.colorOffset;\n  }\n  gl.uniform4fv(uniforms.colorOffset, colorOffset);\n  var colorMatrix = defaultColorMatrix;\n  if (effects && effects.colorMatrix) {\n    colorMatrix = effects.colorMatrix;\n  }\n  gl.uniformMatrix4fv(uniforms.colorMatrix, false, colorMatrix);\n}\n\n// Temporary vectors for setViewport.\nvar translateVector = vec3.create();\nvar scaleVector = vec3.create();\n\n// Sets the WebGL viewport and returns a viewport clamping compensation matrix.\n//\n// Negative viewport origin coordinates cause rendering issues. Letting the\n// viewport dimensions extend beyond the visible area do not seem to cause\n// rendering issues, but they may still have an impact on performance.\n// Therefore, when the scene's rect is not fully contained in the rendering\n// area, we clamp the viewport to the rendering area, and return a compensation\n// matrix to scale and translate vertices accordingly.\nfunction setViewport(gl, layer, rect, viewportMatrix) {\n  if (rect.x === 0 && rect.width === 1 && rect.y === 0 && rect.height === 1) {\n    // Fast path for full rect.\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    mat4.identity(viewportMatrix);\n    return;\n  }\n  var offsetX = rect.x;\n  var clampedOffsetX = clamp(offsetX, 0, 1);\n  var leftExcess = clampedOffsetX - offsetX;\n  var maxClampedWidth = 1 - clampedOffsetX;\n  var clampedWidth = clamp(rect.width - leftExcess, 0, maxClampedWidth);\n  var rightExcess = rect.width - clampedWidth;\n  var offsetY = 1 - rect.height - rect.y;\n  var clampedOffsetY = clamp(offsetY, 0, 1);\n  var bottomExcess = clampedOffsetY - offsetY;\n  var maxClampedHeight = 1 - clampedOffsetY;\n  var clampedHeight = clamp(rect.height - bottomExcess, 0, maxClampedHeight);\n  var topExcess = rect.height - clampedHeight;\n  vec3.set(scaleVector, rect.width / clampedWidth, rect.height / clampedHeight, 1);\n  vec3.set(translateVector, (rightExcess - leftExcess) / clampedWidth, (topExcess - bottomExcess) / clampedHeight, 0);\n  mat4.identity(viewportMatrix);\n  mat4.translate(viewportMatrix, viewportMatrix, translateVector);\n  mat4.scale(viewportMatrix, viewportMatrix, scaleVector);\n  gl.viewport(gl.drawingBufferWidth * clampedOffsetX, gl.drawingBufferHeight * clampedOffsetY, gl.drawingBufferWidth * clampedWidth, gl.drawingBufferHeight * clampedHeight);\n}\nmodule.exports = {\n  createShaderProgram: createShaderProgram,\n  destroyShaderProgram: destroyShaderProgram,\n  createConstantBuffers: createConstantBuffers,\n  destroyConstantBuffers: destroyConstantBuffers,\n  enableAttributes: enableAttributes,\n  disableAttributes: disableAttributes,\n  setTexture: setTexture,\n  setDepth: setDepth,\n  setViewport: setViewport,\n  setupPixelEffectUniforms: setupPixelEffectUniforms\n};","map":{"version":3,"names":["MAX_LAYERS","MAX_LEVELS","clamp","require","vec4","vec3","mat4","createShader","gl","type","src","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createShaderProgram","vertexSrc","fragmentSrc","attribList","uniformList","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","i","length","attrib","getAttribLocation","Error","j","uniform","getUniformLocation","destroyShaderProgram","shaderList","getAttachedShaders","detachShader","deleteShader","deleteProgram","createConstantBuffer","target","usage","value","buffer","createBuffer","bindBuffer","bufferData","createConstantBuffers","vertexIndices","vertexPositions","textureCoords","ELEMENT_ARRAY_BUFFER","STATIC_DRAW","Uint16Array","ARRAY_BUFFER","Float32Array","destroyConstantBuffers","constantBuffers","deleteBuffer","enableAttributes","numAttrs","ACTIVE_ATTRIBUTES","enableVertexAttribArray","disableAttributes","disableVertexAttribArray","setTexture","texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","_texture","uniform1i","uSampler","setDepth","layerZ","tileZ","depth","uniform1f","uDepth","defaultOpacity","defaultColorOffset","create","defaultColorMatrix","identity","setupPixelEffectUniforms","effects","uniforms","opacity","colorOffset","uniform4fv","colorMatrix","uniformMatrix4fv","translateVector","scaleVector","setViewport","layer","rect","viewportMatrix","x","width","y","height","viewport","drawingBufferWidth","drawingBufferHeight","offsetX","clampedOffsetX","leftExcess","maxClampedWidth","clampedWidth","rightExcess","offsetY","clampedOffsetY","bottomExcess","maxClampedHeight","clampedHeight","topExcess","set","translate","scale","module","exports"],"sources":["E:/VR/node_modules/marzipano/src/renderers/WebGlCommon.js"],"sourcesContent":["/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n// These are used to set the WebGl depth for a tile.\nvar MAX_LAYERS = 256; // Max number of layers per stage.\nvar MAX_LEVELS = 256; // Max number of levels per layer.\n\nvar clamp = require('../util/clamp');\nvar vec4 = require('gl-matrix').vec4;\nvar vec3 = require('gl-matrix').vec3;\nvar mat4 = require('gl-matrix').mat4;\n\n\nfunction createShader(gl, type, src) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw gl.getShaderInfoLog(shader);\n  }\n  return shader;\n}\n\n\nfunction createShaderProgram(gl, vertexSrc, fragmentSrc, attribList, uniformList) {\n\n  var vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexSrc);\n  var fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentSrc);\n\n  var shaderProgram = gl.createProgram();\n\n  gl.attachShader(shaderProgram, vertexShader);\n  gl.attachShader(shaderProgram, fragmentShader);\n  gl.linkProgram(shaderProgram);\n\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    throw gl.getProgramInfoLog(shaderProgram);\n  }\n\n  for (var i = 0; i < attribList.length; i++) {\n    var attrib = attribList[i];\n    shaderProgram[attrib] = gl.getAttribLocation(shaderProgram, attrib);\n    if (shaderProgram[attrib] === -1) {\n      throw new Error('Shader program has no ' + attrib + ' attribute');\n    }\n  }\n\n  for (var j = 0; j < uniformList.length; j++) {\n    var uniform = uniformList[j];\n    shaderProgram[uniform] = gl.getUniformLocation(shaderProgram, uniform);\n    if (shaderProgram[uniform] === -1) {\n      throw new Error('Shader program has no ' + uniform + ' uniform');\n    }\n  }\n\n  return shaderProgram;\n}\n\n\nfunction destroyShaderProgram(gl, shaderProgram) {\n  var shaderList = gl.getAttachedShaders(shaderProgram);\n  for (var i = 0; i < shaderList.length; i++) {\n    var shader = shaderList[i];\n    gl.detachShader(shaderProgram, shader);\n    gl.deleteShader(shader);\n  }\n  gl.deleteProgram(shaderProgram);\n}\n\n\nfunction createConstantBuffer(gl, target, usage, value) {\n  var buffer = gl.createBuffer();\n  gl.bindBuffer(target, buffer);\n  gl.bufferData(target, value, usage);\n  return buffer;\n}\n\n\nfunction createConstantBuffers(gl, vertexIndices, vertexPositions, textureCoords) {\n  return {\n    vertexIndices: createConstantBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, gl.STATIC_DRAW, new Uint16Array(vertexIndices)),\n    vertexPositions: createConstantBuffer(gl, gl.ARRAY_BUFFER, gl.STATIC_DRAW, new Float32Array(vertexPositions)),\n    textureCoords: createConstantBuffer(gl, gl.ARRAY_BUFFER, gl.STATIC_DRAW, new Float32Array(textureCoords))\n  };\n}\n\n\nfunction destroyConstantBuffers(gl, constantBuffers) {\n  gl.deleteBuffer(constantBuffers.vertexIndices);\n  gl.deleteBuffer(constantBuffers.vertexPositions);\n  gl.deleteBuffer(constantBuffers.textureCoords);\n}\n\n\nfunction enableAttributes(gl, shaderProgram) {\n  var numAttrs = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\n  for (var i = 0; i < numAttrs; i++) {\n    gl.enableVertexAttribArray(i);\n  }\n}\n\n\nfunction disableAttributes(gl, shaderProgram) {\n  var numAttrs = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\n  for (var i = 0; i < numAttrs; i++) {\n    gl.disableVertexAttribArray(i);\n  }\n}\n\n\nfunction setTexture(gl, shaderProgram, texture) {\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture._texture);\n  gl.uniform1i(shaderProgram.uSampler, 0);\n}\n\n\nfunction setDepth(gl, shaderProgram, layerZ, tileZ) {\n  var depth = (((layerZ + 1) * MAX_LEVELS) - tileZ) / (MAX_LEVELS * MAX_LAYERS);\n  gl.uniform1f(shaderProgram.uDepth, depth);\n}\n\n\nvar defaultOpacity = 1.0;\nvar defaultColorOffset = vec4.create();\nvar defaultColorMatrix = mat4.create();\nmat4.identity(defaultColorMatrix);\n\nfunction setupPixelEffectUniforms(gl, effects, uniforms) {\n  var opacity = defaultOpacity;\n  if (effects && effects.opacity != null) {\n    opacity = effects.opacity;\n  }\n  gl.uniform1f(uniforms.opacity, opacity);\n\n  var colorOffset = defaultColorOffset;\n  if (effects && effects.colorOffset) {\n    colorOffset = effects.colorOffset;\n  }\n  gl.uniform4fv(uniforms.colorOffset, colorOffset);\n\n  var colorMatrix = defaultColorMatrix;\n  if (effects && effects.colorMatrix) {\n    colorMatrix = effects.colorMatrix;\n  }\n  gl.uniformMatrix4fv(uniforms.colorMatrix, false, colorMatrix);\n}\n\n\n// Temporary vectors for setViewport.\nvar translateVector = vec3.create();\nvar scaleVector = vec3.create();\n\n\n// Sets the WebGL viewport and returns a viewport clamping compensation matrix.\n//\n// Negative viewport origin coordinates cause rendering issues. Letting the\n// viewport dimensions extend beyond the visible area do not seem to cause\n// rendering issues, but they may still have an impact on performance.\n// Therefore, when the scene's rect is not fully contained in the rendering\n// area, we clamp the viewport to the rendering area, and return a compensation\n// matrix to scale and translate vertices accordingly.\nfunction setViewport(gl, layer, rect, viewportMatrix) {\n  if (rect.x === 0 && rect.width === 1 && rect.y === 0 && rect.height === 1) {\n    // Fast path for full rect.\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    mat4.identity(viewportMatrix);\n    return;\n  }\n\n  var offsetX = rect.x;\n  var clampedOffsetX = clamp(offsetX, 0, 1);\n  var leftExcess = clampedOffsetX - offsetX;\n  var maxClampedWidth = 1 - clampedOffsetX;\n  var clampedWidth = clamp(rect.width - leftExcess, 0, maxClampedWidth);\n  var rightExcess = rect.width - clampedWidth;\n\n  var offsetY = 1 - rect.height - rect.y;\n  var clampedOffsetY = clamp(offsetY, 0, 1);\n  var bottomExcess = clampedOffsetY - offsetY;\n  var maxClampedHeight = 1 - clampedOffsetY;\n  var clampedHeight = clamp(rect.height - bottomExcess, 0, maxClampedHeight);\n  var topExcess = rect.height - clampedHeight;\n\n  vec3.set(\n    scaleVector,\n    rect.width / clampedWidth,\n    rect.height / clampedHeight,\n    1);\n\n  vec3.set(\n    translateVector,\n    (rightExcess - leftExcess) / clampedWidth,\n    (topExcess - bottomExcess) / clampedHeight,\n    0);\n\n  mat4.identity(viewportMatrix);\n  mat4.translate(viewportMatrix, viewportMatrix, translateVector);\n  mat4.scale(viewportMatrix, viewportMatrix, scaleVector);\n\n  gl.viewport(gl.drawingBufferWidth * clampedOffsetX,\n              gl.drawingBufferHeight * clampedOffsetY,\n              gl.drawingBufferWidth * clampedWidth,\n              gl.drawingBufferHeight * clampedHeight);\n}\n\nmodule.exports = {\n  createShaderProgram: createShaderProgram,\n  destroyShaderProgram: destroyShaderProgram,\n  createConstantBuffers: createConstantBuffers,\n  destroyConstantBuffers: destroyConstantBuffers,\n  enableAttributes: enableAttributes,\n  disableAttributes: disableAttributes,\n  setTexture: setTexture,\n  setDepth: setDepth,\n  setViewport: setViewport,\n  setupPixelEffectUniforms: setupPixelEffectUniforms\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}