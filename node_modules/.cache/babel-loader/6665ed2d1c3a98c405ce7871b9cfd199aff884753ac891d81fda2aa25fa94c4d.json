{"ast":null,"code":"/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar noop = require('./noop');\n\n// Return a cancelable function that executes fn in a loop until it returns\n// successfully.\nfunction retry(fn) {\n  return function retried() {\n    var args = arguments.length ? Array.prototype.slice.call(arguments, 0, arguments.length - 1) : [];\n    var done = arguments.length ? arguments[arguments.length - 1] : noop;\n    var cfn = null;\n    var canceled = false;\n    function exec() {\n      var err = arguments[0];\n      if (!err || canceled) {\n        done.apply(null, arguments);\n      } else {\n        cfn = fn.apply(null, args);\n      }\n    }\n    args.push(exec);\n    exec(true);\n    return function cancel() {\n      canceled = true;\n      cfn.apply(null, arguments);\n    };\n  };\n}\nmodule.exports = retry;","map":{"version":3,"names":["noop","require","retry","fn","retried","args","arguments","length","Array","prototype","slice","call","done","cfn","canceled","exec","err","apply","push","cancel","module","exports"],"sources":["E:/VR/node_modules/marzipano/src/util/retry.js"],"sourcesContent":["/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar noop = require('./noop');\n\n// Return a cancelable function that executes fn in a loop until it returns\n// successfully.\nfunction retry(fn) {\n\n  return function retried() {\n\n    var args = arguments.length ? Array.prototype.slice.call(arguments, 0, arguments.length - 1) : [];\n    var done = arguments.length ? arguments[arguments.length - 1] : noop;\n\n    var cfn = null;\n    var canceled = false;\n\n    function exec() {\n      var err = arguments[0];\n      if (!err || canceled) {\n        done.apply(null, arguments);\n      } else {\n        cfn = fn.apply(null, args);\n      }\n    }\n\n    args.push(exec);\n    exec(true);\n\n    return function cancel() {\n      canceled = true;\n      cfn.apply(null, arguments);\n    };\n\n  };\n\n}\n\nmodule.exports = retry;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZ,IAAIA,IAAI,GAAGC,OAAO,CAAC,QAAQ,CAAC;;AAE5B;AACA;AACA,SAASC,KAAKA,CAACC,EAAE,EAAE;EAEjB,OAAO,SAASC,OAAOA,CAAA,EAAG;IAExB,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAAM,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACL,SAAS,EAAE,CAAC,EAAEA,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;IACjG,IAAIK,IAAI,GAAGN,SAAS,CAACC,MAAM,GAAGD,SAAS,CAACA,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,GAAGP,IAAI;IAEpE,IAAIa,GAAG,GAAG,IAAI;IACd,IAAIC,QAAQ,GAAG,KAAK;IAEpB,SAASC,IAAIA,CAAA,EAAG;MACd,IAAIC,GAAG,GAAGV,SAAS,CAAC,CAAC,CAAC;MACtB,IAAI,CAACU,GAAG,IAAIF,QAAQ,EAAE;QACpBF,IAAI,CAACK,KAAK,CAAC,IAAI,EAAEX,SAAS,CAAC;MAC7B,CAAC,MAAM;QACLO,GAAG,GAAGV,EAAE,CAACc,KAAK,CAAC,IAAI,EAAEZ,IAAI,CAAC;MAC5B;IACF;IAEAA,IAAI,CAACa,IAAI,CAACH,IAAI,CAAC;IACfA,IAAI,CAAC,IAAI,CAAC;IAEV,OAAO,SAASI,MAAMA,CAAA,EAAG;MACvBL,QAAQ,GAAG,IAAI;MACfD,GAAG,CAACI,KAAK,CAAC,IAAI,EAAEX,SAAS,CAAC;IAC5B,CAAC;EAEH,CAAC;AAEH;AAEAc,MAAM,CAACC,OAAO,GAAGnB,KAAK"},"metadata":{},"sourceType":"script","externalDependencies":[]}