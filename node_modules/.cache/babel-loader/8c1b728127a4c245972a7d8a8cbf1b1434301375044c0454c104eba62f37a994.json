{"ast":null,"code":"/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class KeyControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Sets the velocity and friction of a single parameter by pressing and\n * unpressing a key.\n *\n * @param {number} keyCode Key which activates the method when pressed\n * @param {string} parameter The parameter to be controlled (e.g. `x`, `y` or `zoom`)\n * @param {number} velocity Velocity at which the parameter changes. Use a\n * negative number for opposite direction\n * @param {number} friction Friction at which the parameter stops\n * @param {Element} [element=document] DOM element where the key events are listened to\n */\nfunction KeyControlMethod(keyCode, parameter, velocity, friction, element) {\n  if (!keyCode) {\n    throw new Error(\"KeyControlMethod: keyCode must be defined\");\n  }\n  if (!parameter) {\n    throw new Error(\"KeyControlMethod: parameter must be defined\");\n  }\n  if (!velocity) {\n    throw new Error(\"KeyControlMethod: velocity must be defined\");\n  }\n  if (!friction) {\n    throw new Error(\"KeyControlMethod: friction must be defined\");\n  }\n  element = element || document;\n  this._keyCode = keyCode;\n  this._parameter = parameter;\n  this._velocity = velocity;\n  this._friction = friction;\n  this._element = element;\n  this._keydownHandler = this._handlePress.bind(this);\n  this._keyupHandler = this._handleRelease.bind(this);\n  this._blurHandler = this._handleBlur.bind(this);\n  this._element.addEventListener('keydown', this._keydownHandler);\n  this._element.addEventListener('keyup', this._keyupHandler);\n  window.addEventListener('blur', this._blurHandler);\n  this._dynamics = new Dynamics();\n  this._pressing = false;\n}\neventEmitter(KeyControlMethod);\n\n/**\n * Destructor.\n */\nKeyControlMethod.prototype.destroy = function () {\n  this._element.removeEventListener('keydown', this._keydownHandler);\n  this._element.removeEventListener('keyup', this._keyupHandler);\n  window.removeEventListener('blur', this._blurHandler);\n  clearOwnProperties(this);\n};\nKeyControlMethod.prototype._handlePress = function (e) {\n  if (e.keyCode !== this._keyCode) {\n    return;\n  }\n  this._pressing = true;\n  this._dynamics.velocity = this._velocity;\n  this._dynamics.friction = 0;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n  this.emit('active');\n};\nKeyControlMethod.prototype._handleRelease = function (e) {\n  if (e.keyCode !== this._keyCode) {\n    return;\n  }\n  if (this._pressing) {\n    this._dynamics.friction = this._friction;\n    this.emit('parameterDynamics', this._parameter, this._dynamics);\n    this.emit('inactive');\n  }\n  this._pressing = false;\n};\nKeyControlMethod.prototype._handleBlur = function () {\n  this._dynamics.velocity = 0;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n  this.emit('inactive');\n  this._pressing = false;\n};\nmodule.exports = KeyControlMethod;","map":{"version":3,"names":["eventEmitter","require","Dynamics","clearOwnProperties","KeyControlMethod","keyCode","parameter","velocity","friction","element","Error","document","_keyCode","_parameter","_velocity","_friction","_element","_keydownHandler","_handlePress","bind","_keyupHandler","_handleRelease","_blurHandler","_handleBlur","addEventListener","window","_dynamics","_pressing","prototype","destroy","removeEventListener","e","emit","module","exports"],"sources":["E:/VR/node_modules/marzipano/src/controls/Key.js"],"sourcesContent":["/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar Dynamics = require('./Dynamics');\nvar clearOwnProperties = require('../util/clearOwnProperties');\n\n/**\n * @class KeyControlMethod\n * @implements ControlMethod\n * @classdesc\n *\n * Sets the velocity and friction of a single parameter by pressing and\n * unpressing a key.\n *\n * @param {number} keyCode Key which activates the method when pressed\n * @param {string} parameter The parameter to be controlled (e.g. `x`, `y` or `zoom`)\n * @param {number} velocity Velocity at which the parameter changes. Use a\n * negative number for opposite direction\n * @param {number} friction Friction at which the parameter stops\n * @param {Element} [element=document] DOM element where the key events are listened to\n */\nfunction KeyControlMethod(keyCode, parameter, velocity, friction, element) {\n  if(!keyCode) {\n    throw new Error(\"KeyControlMethod: keyCode must be defined\");\n  }\n  if(!parameter) {\n    throw new Error(\"KeyControlMethod: parameter must be defined\");\n  }\n  if(!velocity) {\n    throw new Error(\"KeyControlMethod: velocity must be defined\");\n  }\n  if(!friction) {\n    throw new Error(\"KeyControlMethod: friction must be defined\");\n  }\n\n  element = element || document;\n\n  this._keyCode = keyCode;\n  this._parameter = parameter;\n  this._velocity = velocity;\n  this._friction = friction;\n  this._element = element;\n\n  this._keydownHandler = this._handlePress.bind(this);\n  this._keyupHandler = this._handleRelease.bind(this);\n  this._blurHandler = this._handleBlur.bind(this);\n\n  this._element.addEventListener('keydown', this._keydownHandler);\n  this._element.addEventListener('keyup', this._keyupHandler);\n  window.addEventListener('blur', this._blurHandler);\n\n  this._dynamics = new Dynamics();\n  this._pressing = false;\n}\neventEmitter(KeyControlMethod);\n\n/**\n * Destructor.\n */\nKeyControlMethod.prototype.destroy = function() {\n  this._element.removeEventListener('keydown', this._keydownHandler);\n  this._element.removeEventListener('keyup', this._keyupHandler);\n  window.removeEventListener('blur', this._blurHandler);\n  clearOwnProperties(this);\n};\n\nKeyControlMethod.prototype._handlePress = function(e) {\n  if(e.keyCode !== this._keyCode) { return; }\n\n  this._pressing = true;\n\n  this._dynamics.velocity = this._velocity;\n  this._dynamics.friction = 0;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n  this.emit('active');\n};\n\nKeyControlMethod.prototype._handleRelease = function(e) {\n  if(e.keyCode !== this._keyCode) { return; }\n\n  if(this._pressing) {\n    this._dynamics.friction = this._friction;\n    this.emit('parameterDynamics', this._parameter, this._dynamics);\n    this.emit('inactive');\n  }\n\n  this._pressing = false;\n};\n\nKeyControlMethod.prototype._handleBlur = function() {\n  this._dynamics.velocity = 0;\n  this.emit('parameterDynamics', this._parameter, this._dynamics);\n  this.emit('inactive');\n\n  this._pressing = false;\n};\n\nmodule.exports = KeyControlMethod;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}